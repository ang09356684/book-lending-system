# 00. 環境問題解決
## Docker環境設置與常見問題

---

### 🚨 **當前問題：Docker Compose命令不存在**

#### **錯誤訊息**
```bash
docker-compose: The term 'docker-compose' is not recognized as a name of a cmdlet, function, script file, or executable program.
```

#### **問題原因**
- Docker Desktop未安裝或未正確安裝
- Docker Compose未包含在安裝中
- 環境變數未正確設定

---

## 🔧 **解決方案**

### **方案1：安裝Docker Desktop（推薦）**

#### **步驟1：下載Docker Desktop**
1. 前往 [Docker Desktop官網](https://www.docker.com/products/docker-desktop/)
2. 下載Windows版本
3. 選擇適合您系統的版本（Windows 10/11）

#### **步驟2：安裝Docker Desktop**
1. 執行下載的安裝檔
2. 按照安裝精靈的指示進行安裝
3. 安裝完成後重啟電腦

#### **步驟3：驗證安裝**
```bash
# 檢查Docker版本
docker --version

# 檢查Docker Compose版本
docker compose version
```

**注意：** 新版本的Docker Desktop使用 `docker compose`（沒有連字號）而不是 `docker-compose`

---

### **方案2：使用新版本Docker Compose命令**

如果Docker Desktop已安裝，嘗試使用新版本命令：

```bash
# 舊版本命令（可能不存在）
docker-compose -f docker-compose.dev.yml up --build

# 新版本命令（推薦）
docker compose -f docker-compose.dev.yml up --build
```

---

### **方案3：手動安裝Docker Compose**

如果Docker Desktop已安裝但沒有Docker Compose：

#### **Windows PowerShell安裝**
```powershell
# 下載Docker Compose
Invoke-WebRequest -Uri "https://github.com/docker/compose/releases/latest/download/docker-compose-Windows-x86_64.exe" -OutFile "$Env:ProgramFiles\Docker\Docker\resources\bin\docker-compose.exe"

# 重新啟動Docker Desktop
```

---

## 🐳 **Docker環境驗證**

### **檢查Docker狀態**
```bash
# 檢查Docker是否運行
docker info

# 檢查Docker Compose是否可用
docker compose version
```

### **測試Docker功能**
```bash
# 運行測試容器
docker run hello-world

# 檢查Docker Compose功能
docker compose --help
```

---

## 🚀 **啟動專案的正確步驟**

### **步驟1：確保Docker Desktop運行**
1. 啟動Docker Desktop應用程式
2. 等待Docker引擎完全啟動
3. 確認狀態為"Running"

### **步驟2：使用正確的命令**
```bash
# 進入專案目錄
cd D:\library

# 使用新版本Docker Compose命令
docker compose -f docker-compose.yml up --build
```

### **步驟3：驗證服務啟動**
```bash
# 檢查容器狀態
docker ps

# 檢查容器日誌
docker logs library-app-dev
```

---

## 📋 **常見問題與解決方法**

### **問題1：端口被佔用**
```bash
# 錯誤訊息
Error response from daemon: driver failed programming external connectivity on endpoint

# 解決方法
# 1. 檢查端口是否被其他程式佔用
netstat -ano | findstr :8080

# 2. 停止佔用端口的程式
# 3. 或者修改docker-compose.dev.yml中的端口映射
```

### **問題2：權限不足**
```bash
# 錯誤訊息
Got permission denied while trying to connect to the Docker daemon socket

# 解決方法
# 1. 確保用戶在docker群組中
# 2. 以管理員身份運行PowerShell
# 3. 重新啟動Docker Desktop
```

### **問題3：磁碟空間不足**
```bash
# 錯誤訊息
no space left on device

# 解決方法
# 1. 清理Docker映像和容器
docker system prune -a

# 2. 清理Docker卷
docker volume prune
```

---

## 🔄 **替代方案：本地開發**

如果Docker環境設置有困難，我們也可以進行本地開發：

### **本地開發環境需求**
1. **Java 17**：下載並安裝JDK 17
2. **Maven**：下載並安裝Maven
3. **PostgreSQL**：安裝PostgreSQL資料庫

### **本地啟動命令**
```bash
# 編譯專案
mvn clean compile

# 運行專案
mvn spring-boot:run
```

---

## 📚 **學習資源**

### **Docker學習資源**
- [Docker官方文件](https://docs.docker.com/)
- [Docker Compose文件](https://docs.docker.com/compose/)
- [Docker Desktop for Windows](https://docs.docker.com/desktop/windows/)

### **Spring Boot學習資源**
- [Spring Boot官方文件](https://spring.io/projects/spring-boot)
- [Spring Boot Guides](https://spring.io/guides)

---

## 🎯 **下一步行動**

請選擇以下其中一個方案：

### **方案A：解決Docker環境**
1. 安裝Docker Desktop
2. 驗證Docker功能
3. 使用正確的Docker Compose命令

### **方案B：本地開發**
1. 安裝Java 17和Maven
2. 安裝PostgreSQL
3. 修改application.yml配置

### **方案C：繼續學習**
即使環境問題未解決，我們也可以：
1. 繼續學習Spring Boot概念
2. 建立Entity和Repository類別
3. 理解專案架構

---

**請告訴我您希望採用哪個方案，我會提供詳細的指導！**

