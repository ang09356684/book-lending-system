# 01. å°ˆæ¡ˆåˆå§‹åŒ–èˆ‡ç’°å¢ƒæº–å‚™
## ç·šä¸Šåœ–æ›¸å€Ÿé–±ç³»çµ± - Spring Boot å­¸ç¿’ç­†è¨˜

---

### ğŸ“‹ **å­¸ç¿’ç›®æ¨™**
- äº†è§£Spring Bootå°ˆæ¡ˆçš„åŸºæœ¬çµæ§‹
- ç†è§£Mavenå°ˆæ¡ˆé…ç½®ï¼ˆpom.xmlï¼‰
- æŒæ¡Dockeré–‹ç™¼ç’°å¢ƒçš„è¨­ç½®
- å»ºç«‹å®Œæ•´çš„é–‹ç™¼ç’°å¢ƒ

---

## ğŸ¯ **ç‚ºä»€éº¼è¦é€™æ¨£åšï¼Ÿ**

### **1. ç‚ºä»€éº¼ä½¿ç”¨Spring Bootï¼Ÿ**
Spring Bootæ˜¯ä¸€å€‹**ç´„å®šå„ªæ–¼é…ç½®**çš„æ¡†æ¶ï¼Œå®ƒï¼š
- âœ… **è‡ªå‹•é…ç½®**ï¼šæ ¹æ“šä¾è³´è‡ªå‹•é…ç½®æ‡‰ç”¨ç¨‹å¼
- âœ… **å…§å»ºä¼ºæœå™¨**ï¼šä¸éœ€è¦é¡å¤–é…ç½®Tomcat
- âœ… **ç”Ÿç”¢å°±ç·’**ï¼šå…§å»ºç›£æ§ã€å¥åº·æª¢æŸ¥ç­‰åŠŸèƒ½
- âœ… **å¿«é€Ÿé–‹ç™¼**ï¼šæ¸›å°‘æ¨£æ¿ç¨‹å¼ç¢¼

### **2. ç‚ºä»€éº¼ä½¿ç”¨Mavenï¼Ÿ**
Mavenæ˜¯Javaçš„**å»ºç½®å·¥å…·**ï¼Œå®ƒï¼š
- âœ… **ä¾è³´ç®¡ç†**ï¼šè‡ªå‹•ä¸‹è¼‰å’Œç®¡ç†å¥—ä»¶
- âœ… **å°ˆæ¡ˆçµæ§‹**ï¼šæ¨™æº–åŒ–çš„å°ˆæ¡ˆç›®éŒ„çµæ§‹
- âœ… **å»ºç½®ç”Ÿå‘½é€±æœŸ**ï¼šç·¨è­¯ã€æ¸¬è©¦ã€æ‰“åŒ…ã€éƒ¨ç½²
- âœ… **æ’ä»¶ç”Ÿæ…‹**ï¼šè±å¯Œçš„æ’ä»¶æ”¯æ´

### **3. ç‚ºä»€éº¼ä½¿ç”¨Dockerï¼Ÿ**
Dockeræä¾›**å®¹å™¨åŒ–**ç’°å¢ƒï¼Œå®ƒï¼š
- âœ… **ç’°å¢ƒä¸€è‡´æ€§**ï¼šé¿å…ã€Œåœ¨æˆ‘é›»è…¦ä¸Šèƒ½è·‘ã€çš„å•é¡Œ
- âœ… **å¿«é€Ÿéƒ¨ç½²**ï¼šä¸€éµå•Ÿå‹•å®Œæ•´ç’°å¢ƒ
- âœ… **éš”é›¢æ€§**ï¼šä¸åŒå°ˆæ¡ˆä½¿ç”¨ä¸åŒç’°å¢ƒ
- âœ… **å¯ç§»æ¤æ€§**ï¼šåœ¨ä»»ä½•åœ°æ–¹éƒ½èƒ½é‹è¡Œ

---

## ğŸ—ï¸ **ç¬¬ä¸€æ­¥ï¼šå»ºç«‹Mavenå°ˆæ¡ˆé…ç½®ï¼ˆpom.xmlï¼‰**

### **ä»€éº¼æ˜¯pom.xmlï¼Ÿ**
`pom.xml`æ˜¯Mavenå°ˆæ¡ˆçš„**æ ¸å¿ƒé…ç½®æ–‡ä»¶**ï¼Œå®šç¾©äº†ï¼š
- å°ˆæ¡ˆåŸºæœ¬è³‡è¨Šï¼ˆåç¨±ã€ç‰ˆæœ¬ã€æè¿°ï¼‰
- ä¾è³´å¥—ä»¶æ¸…å–®
- å»ºç½®é…ç½®
- æ’ä»¶è¨­å®š

### **pom.xmlçµæ§‹è§£æ**

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
         http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <!-- ç¹¼æ‰¿Spring Bootçˆ¶å°ˆæ¡ˆ -->
    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>3.2.0</version>
        <relativePath/>
    </parent>

    <!-- å°ˆæ¡ˆåŸºæœ¬è³‡è¨Š -->
    <groupId>com.library</groupId>
    <artifactId>library-management-system</artifactId>
    <version>1.0.0</version>
    <name>Library Management System</name>
    <description>ç·šä¸Šåœ–æ›¸å€Ÿé–±ç³»çµ± - Spring Bootå°ˆæ¡ˆ</description>
```

### **é‡è¦ä¾è³´å¥—ä»¶èªªæ˜**

#### **Spring Boot Starters**
```xml
<!-- WebåŠŸèƒ½ï¼šæä¾›RESTful API -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
</dependency>

<!-- è³‡æ–™åº«æ“ä½œï¼šJPA/Hibernate -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-jpa</artifactId>
</dependency>

<!-- å®‰å…¨èªè­‰ï¼šSpring Security -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-security</artifactId>
</dependency>
```

**ä»€éº¼æ˜¯Starterï¼Ÿ**
- Starteræ˜¯Spring Bootçš„**è‡ªå‹•é…ç½®å¥—ä»¶**
- åŒ…å«ç›¸é—œåŠŸèƒ½çš„æ‰€æœ‰ä¾è³´
- è‡ªå‹•é…ç½®ç›¸é—œçš„Beanå’Œè¨­å®š

#### **è³‡æ–™åº«ç›¸é—œ**
```xml
<!-- PostgreSQLé©…å‹• -->
<dependency>
    <groupId>org.postgresql</groupId>
    <artifactId>postgresql</artifactId>
    <scope>runtime</scope>
</dependency>

<!-- æ¸¬è©¦ç”¨è¨˜æ†¶é«”è³‡æ–™åº« -->
<dependency>
    <groupId>com.h2database</groupId>
    <artifactId>h2</artifactId>
    <scope>test</scope>
</dependency>
```

#### **JWTèªè­‰**
```xml
<!-- JWT API -->
<dependency>
    <groupId>io.jsonwebtoken</groupId>
    <artifactId>jjwt-api</artifactId>
    <version>${jjwt.version}</version>
</dependency>
```

**ä»€éº¼æ˜¯JWTï¼Ÿ**
- JWTï¼ˆJSON Web Tokenï¼‰æ˜¯**ç„¡ç‹€æ…‹èªè­‰**æ–¹å¼
- ç”¨æˆ¶ç™»å…¥å¾Œç²å¾—Tokenï¼Œå¾ŒçºŒè«‹æ±‚å¸¶ä¸ŠToken
- ä¸éœ€è¦åœ¨ä¼ºæœå™¨ç«¯å„²å­˜Session

---

## ğŸ—ï¸ **ç¬¬äºŒæ­¥ï¼šå»ºç«‹ä¸»æ‡‰ç”¨ç¨‹å¼é¡åˆ¥**

### **æª”æ¡ˆä½ç½®ï¼š** `src/main/java/com/library/LibraryManagementApplication.java`

```java
package com.library;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.scheduling.annotation.EnableScheduling;

/**
 * ç·šä¸Šåœ–æ›¸å€Ÿé–±ç³»çµ± - ä¸»æ‡‰ç”¨ç¨‹å¼é¡åˆ¥
 */
@SpringBootApplication
@EnableScheduling
public class LibraryManagementApplication {

    public static void main(String[] args) {
        SpringApplication.run(LibraryManagementApplication.class, args);
    }
}
```

### **é‡è¦è¨»è§£èªªæ˜**

#### **@SpringBootApplication**
- é€™æ˜¯**çµ„åˆè¨»è§£**ï¼ŒåŒ…å«ï¼š
  - `@Configuration`ï¼šæ¨™è¨˜ç‚ºé…ç½®é¡åˆ¥
  - `@EnableAutoConfiguration`ï¼šå•Ÿç”¨è‡ªå‹•é…ç½®
  - `@ComponentScan`ï¼šæƒæçµ„ä»¶

#### **@EnableScheduling**
- å•Ÿç”¨**æ’ç¨‹åŠŸèƒ½**
- ç”¨æ–¼å®šæ™‚ä»»å‹™ï¼ˆå¦‚åˆ°æœŸé€šçŸ¥ï¼‰

### **mainæ–¹æ³•çš„ä½œç”¨**
```java
SpringApplication.run(LibraryManagementApplication.class, args);
```
- å•Ÿå‹•Spring Bootæ‡‰ç”¨ç¨‹å¼
- è¼‰å…¥æ‰€æœ‰é…ç½®
- å•Ÿå‹•å…§å»ºä¼ºæœå™¨ï¼ˆé è¨­8080ç«¯å£ï¼‰

---

## ğŸ—ï¸ **ç¬¬ä¸‰æ­¥ï¼šå»ºç«‹æ‡‰ç”¨ç¨‹å¼é…ç½®**

### **æª”æ¡ˆä½ç½®ï¼š** `src/main/resources/application.yml`

### **é…ç½®çµæ§‹è§£æ**

#### **è³‡æ–™åº«é…ç½®**
```yaml
spring:
  datasource:
    url: jdbc:postgresql://postgres:5432/library
    username: postgres
    password: password
    driver-class-name: org.postgresql.Driver
```

**é…ç½®èªªæ˜ï¼š**
- `url`ï¼šè³‡æ–™åº«é€£ç·šå­—ä¸²
- `postgres`ï¼šDockerå®¹å™¨åç¨±
- `5432`ï¼šPostgreSQLé è¨­ç«¯å£
- `library`ï¼šè³‡æ–™åº«åç¨±

#### **JPAé…ç½®**
```yaml
jpa:
  hibernate:
    ddl-auto: validate  # é©—è­‰è³‡æ–™åº«çµæ§‹
  show-sql: false       # ä¸é¡¯ç¤ºSQLèªå¥
  properties:
    hibernate:
      dialect: org.hibernate.dialect.PostgreSQLDialect
```

**ddl-autoé¸é …ï¼š**
- `validate`ï¼šé©—è­‰è³‡æ–™åº«çµæ§‹èˆ‡Entityæ˜¯å¦ä¸€è‡´
- `create`ï¼šæ¯æ¬¡å•Ÿå‹•éƒ½é‡æ–°å»ºç«‹è¡¨
- `update`ï¼šæ›´æ–°è¡¨çµæ§‹
- `create-drop`ï¼šå•Ÿå‹•æ™‚å»ºç«‹ï¼Œé—œé–‰æ™‚åˆªé™¤

#### **JWTé…ç½®**
```yaml
jwt:
  secret: library-management-system-secret-key-2024-very-long-and-secure
  expiration: 86400000  # 24å°æ™‚ (æ¯«ç§’)
```

#### **APIæ–‡ä»¶é…ç½®**
```yaml
springdoc:
  swagger-ui:
    path: /swagger-ui.html
  info:
    title: ç·šä¸Šåœ–æ›¸å€Ÿé–±ç³»çµ± API
    description: æä¾›åœ–æ›¸å€Ÿé–±ã€é‚„æ›¸ã€æ›¸ç±ç®¡ç†ç­‰åŠŸèƒ½çš„RESTful API
```

---

## ğŸ³ **ç¬¬å››æ­¥ï¼šDockerç’°å¢ƒé…ç½®**

### **Docker Composeé…ç½®**

#### **docker-compose.dev.ymlçµæ§‹**
```yaml
services:
  # æ‡‰ç”¨ç¨‹å¼å®¹å™¨
  app-dev:
    build: 
      context: .
      dockerfile: Dockerfile.dev
    ports:
      - "8080:8080"  # æ‡‰ç”¨ç¨‹å¼ç«¯å£
      - "5005:5005"  # é™¤éŒ¯ç«¯å£
    environment:
      - SPRING_PROFILES_ACTIVE=dev
    depends_on:
      - postgres

  # PostgreSQLè³‡æ–™åº«
  postgres:
    image: postgres:17
    environment:
      POSTGRES_DB: library
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: password
    ports:
      - "5432:5432"
```

### **Dockerfile.devè§£æ**
```dockerfile
# åŸºç¤æ˜ åƒï¼šMaven + OpenJDK 17
FROM maven:3.9-openjdk-17

# è¨­å®šå·¥ä½œç›®éŒ„
WORKDIR /app

# è¤‡è£½pom.xmlä¸¦ä¸‹è¼‰ä¾è³´
COPY pom.xml .
RUN mvn dependency:go-offline

# è¤‡è£½åŸå§‹ç¢¼
COPY src ./src

# æš´éœ²ç«¯å£
EXPOSE 8080 5005

# é–‹ç™¼æ¨¡å¼å‘½ä»¤
CMD ["mvn", "spring-boot:run", "-Dspring-boot.run.jvmArguments='-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:5005'"]
```

---

## ğŸš€ **å•Ÿå‹•Dockerç’°å¢ƒ**

### **å‘½ä»¤èªªæ˜**
```bash
docker-compose -f docker-compose.dev.yml up --build
```

**åƒæ•¸è§£é‡‹ï¼š**
- `-f docker-compose.dev.yml`ï¼šæŒ‡å®šä½¿ç”¨é–‹ç™¼ç’°å¢ƒé…ç½®
- `up`ï¼šå•Ÿå‹•æ‰€æœ‰æœå‹™
- `--build`ï¼šé‡æ–°å»ºç½®æ˜ åƒ

### **å•Ÿå‹•æµç¨‹**
1. **å»ºç½®æ‡‰ç”¨ç¨‹å¼æ˜ åƒ**ï¼šæ ¹æ“šDockerfile.devå»ºç½®
2. **å•Ÿå‹•PostgreSQL**ï¼šå»ºç«‹è³‡æ–™åº«å®¹å™¨
3. **å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼**ï¼šåœ¨å®¹å™¨ä¸­é‹è¡ŒSpring Boot
4. **åˆå§‹åŒ–è³‡æ–™åº«**ï¼šåŸ·è¡Œdatabase_schema.sql

### **è¨ªå•åœ°å€**
- **æ‡‰ç”¨ç¨‹å¼**ï¼šhttp://localhost:8080/api
- **APIæ–‡ä»¶**ï¼šhttp://localhost:8080/api/swagger-ui.html
- **è³‡æ–™åº«ç®¡ç†**ï¼šhttp://localhost:5050 (pgAdmin)

---

## ğŸ“Š **å°ˆæ¡ˆç›®éŒ„çµæ§‹**

```
library-system/
â”œâ”€â”€ ğŸ“š docs/                          # æ–‡ä»¶è³‡æ–™å¤¾
â”œâ”€â”€ ğŸ”§ src/                           # åŸå§‹ç¢¼ç›®éŒ„
â”‚   â”œâ”€â”€ main/                         # ä¸»è¦ç¨‹å¼ç¢¼
â”‚   â”‚   â”œâ”€â”€ java/                     # JavaåŸå§‹ç¢¼
â”‚   â”‚   â”‚   â””â”€â”€ com/library/          # åŸºç¤å¥—ä»¶
â”‚   â”‚   â”‚       â””â”€â”€ LibraryManagementApplication.java
â”‚   â”‚   â””â”€â”€ resources/                # è³‡æºæª”æ¡ˆ
â”‚   â”‚       â””â”€â”€ application.yml       # æ‡‰ç”¨ç¨‹å¼é…ç½®
â”‚   â””â”€â”€ test/                         # æ¸¬è©¦ç¨‹å¼ç¢¼
â”œâ”€â”€ ğŸ—„ï¸ database_schema.sql            # è³‡æ–™åº«Schema
â”œâ”€â”€ ğŸ³ Dockerfile.dev                 # é–‹ç™¼ç’°å¢ƒDockerfile
â”œâ”€â”€ ğŸ³ docker-compose.dev.yml         # Docker Composeé…ç½®
â”œâ”€â”€ ğŸ“¦ pom.xml                        # Mavené…ç½®
â””â”€â”€ ğŸ“– README.md                      # å°ˆæ¡ˆèªªæ˜
```

---

## âœ… **éšæ®µ0å®Œæˆæª¢æŸ¥æ¸…å–®**

- [x] **pom.xmlå»ºç«‹**ï¼šåŒ…å«æ‰€æœ‰å¿…è¦ä¾è³´
- [x] **ä¸»æ‡‰ç”¨ç¨‹å¼é¡åˆ¥**ï¼šSpring Bootå…¥å£é»
- [x] **æ‡‰ç”¨ç¨‹å¼é…ç½®**ï¼šè³‡æ–™åº«ã€JWTç­‰è¨­å®š
- [x] **Dockerç’°å¢ƒé…ç½®**ï¼šé–‹ç™¼ç’°å¢ƒæº–å‚™
- [x] **å°ˆæ¡ˆç›®éŒ„çµæ§‹**ï¼šæ¨™æº–Spring Bootçµæ§‹

---

## ğŸ¯ **å­¸ç¿’é‡é»ç¸½çµ**

### **1. Spring Bootè‡ªå‹•é…ç½®**
- æ ¹æ“šä¾è³´è‡ªå‹•é…ç½®æ‡‰ç”¨ç¨‹å¼
- æ¸›å°‘æ‰‹å‹•é…ç½®çš„å·¥ä½œé‡
- æä¾›ç”Ÿç”¢å°±ç·’çš„åŠŸèƒ½

### **2. Mavenä¾è³´ç®¡ç†**
- è‡ªå‹•ä¸‹è¼‰å’Œç®¡ç†å¥—ä»¶
- è§£æ±ºç‰ˆæœ¬è¡çª
- æ¨™æº–åŒ–å°ˆæ¡ˆçµæ§‹

### **3. Dockerå®¹å™¨åŒ–**
- ç’°å¢ƒä¸€è‡´æ€§
- å¿«é€Ÿéƒ¨ç½²
- éš”é›¢æ€§é–‹ç™¼ç’°å¢ƒ

### **4. é…ç½®ç®¡ç†**
- ä½¿ç”¨YAMLæ ¼å¼é…ç½®
- ç’°å¢ƒç‰¹å®šé…ç½®
- å¤–éƒ¨åŒ–é…ç½®

---

## ğŸ”„ **ä¸‹ä¸€æ­¥ï¼šè³‡æ–™åº«å±¤é–‹ç™¼**

æ¥ä¸‹ä¾†æˆ‘å€‘å°‡ï¼š
1. **å»ºç«‹Entityé¡åˆ¥**ï¼šå°æ‡‰è³‡æ–™åº«è¡¨çš„Javaç‰©ä»¶
2. **å»ºç«‹Repositoryä»‹é¢**ï¼šè³‡æ–™åº«æ“ä½œæ–¹æ³•
3. **æ¸¬è©¦è³‡æ–™åº«é€£ç·š**ï¼šç¢ºä¿ç’°å¢ƒæ­£å¸¸é‹ä½œ

---

**é€™å€‹éšæ®µå»ºç«‹äº†å°ˆæ¡ˆçš„åŸºç¤æ¶æ§‹ï¼Œç‚ºå¾ŒçºŒé–‹ç™¼å¥ å®šäº†å …å¯¦çš„åŸºç¤ï¼**
